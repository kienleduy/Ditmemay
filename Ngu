local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/jensonhirst/Orion/main/source')))()
local Window = OrionLib:MakeWindow({
    Name = "FIXED FULL - KHÃ”NG THIáº¾U CODE ðŸ‘º",
    HidePremium = true,
    SaveConfig = false,
    IntroEnabled = false
})

local MainTab = Window:MakeTab({Name = "Main"})
local QuestTab = Window:MakeTab({Name = "Auto Quest"})
local SkillTab = Window:MakeTab({Name = "Auto Skill"})
local FruitTab = Window:MakeTab({Name = "Fruit"})
local RandomTab = Window:MakeTab({Name = "Random & Lucky"})
local MiscTab = Window:MakeTab({Name = "Misc"})

local LocalPlayer = game.Players.LocalPlayer
local killAuraEnabled = false
local selectedTargetName = "ChÆ°a chá»n"
local targetList = {"ChÆ°a chá»n", "Siu_Owner"}
local dropdown

-- [HÃ€M QUÃ‰T NPC DAMAGE cho Kill Aura]
local function refreshTargetList()
    targetList = {"ChÆ°a chá»n", "Siu_Owner"}
    local npcFolder = workspace:FindFirstChild("NPC DAMAGE")
    if npcFolder then
        for _, model in ipairs(npcFolder:GetChildren()) do
            if model:IsA("Model") and model:FindFirstChildWhichIsA("Humanoid") then
                if model.Name ~= "Siu_Owner" then table.insert(targetList, model.Name) end
            end
        end
    end
    if dropdown then dropdown:Refresh(targetList, true) end
end

-- [HÃ€M KILL Tá»ª XA]
local function killTarget(model)
    if not model then return end
    local hum = model:FindFirstChildWhichIsA("Humanoid")
    if hum and hum.Health > 0 then
        task.spawn(function()
            pcall(function() sethiddenproperty(LocalPlayer, "SimulationRadius", 1e12) end)
            for i = 1, 15 do 
                if not model.Parent or hum.Health <= 0 then break end
                hum.Health = 0
                hum:TakeDamage(9e18)
            end
        end)
    end
end

-- TAB MAIN - KILL AURA
MainTab:AddToggle({
    Name = "Báº­t Kill Aura (XuyÃªn Map)",
    Default = false,
    Callback = function(state)
        killAuraEnabled = state
        task.spawn(function()
            while killAuraEnabled do
                task.wait(0.1)
                if selectedTargetName == "Siu_Owner" then
                    local boss = workspace:FindFirstChild("Siu_Owner")
                    if boss then killTarget(boss) end
                else
                    local npcFolder = workspace:FindFirstChild("NPC DAMAGE")
                    if npcFolder and npcFolder:FindFirstChild(selectedTargetName) then
                        killTarget(npcFolder[selectedTargetName])
                    end
                end
            end
        end)
    end    
})
dropdown = MainTab:AddDropdown({Name = "Chá»n má»¥c tiÃªu", Default = "ChÆ°a chá»n", Options = targetList, Callback = function(v) selectedTargetName = v end})
MainTab:AddButton({Name = "LÃ m má»›i danh sÃ¡ch", Callback = function() refreshTargetList() end})

-- TAB AUTO QUEST - QUÃ‰T Tá»ª workspace.NPCS
local SelectedQuest = ""
local QuestNPCs = {}

local function refreshQuestNPCs()
    QuestNPCs = {}
    local npcsFolder = workspace:FindFirstChild("NPCS")
    if npcsFolder then
        for _, npc in ipairs(npcsFolder:GetChildren()) do
            if npc:IsA("Model") and npc:FindFirstChild("QuestTake", true) then
                table.insert(QuestNPCs, npc.Name)
            end
        end
    end
    table.sort(QuestNPCs)  -- sáº¯p xáº¿p alphabet
end

refreshQuestNPCs()  -- load láº§n Ä‘áº§u

QuestTab:AddDropdown({
    Name = "NPC Nhiá»‡m Vá»¥",
    Default = "ChÆ°a chá»n",
    Options = QuestNPCs,
    Callback = function(v) 
        SelectedQuest = v 
    end
})

QuestTab:AddButton({
    Name = "LÃ m má»›i danh sÃ¡ch NPC",
    Callback = function()
        refreshQuestNPCs()
        OrionLib:MakeNotification({
            Name = "ÄÃ£ lÃ m má»›i danh sÃ¡ch NPC",
            Content = "TÃ¬m tháº¥y: " .. #QuestNPCs .. " NPC cÃ³ Quest",
            Image = "rbxassetid://4483345998",
            Time = 5
        })
    end
})

QuestTab:AddToggle({
    Name = "Auto Nháº­n Quest (Tá»« workspace.NPCS)",
    Default = false,
    Callback = function(state)
        getgenv().AutoTakeQuest = state
        task.spawn(function()
            while getgenv().AutoTakeQuest do
                task.wait(0.7)
                pcall(function()
                    if SelectedQuest == "" or SelectedQuest == "ChÆ°a chá»n" then return end
                    local npcsFolder = workspace:FindFirstChild("NPCS")
                    if not npcsFolder then return end
                    local selectedNPC = npcsFolder:FindFirstChild(SelectedQuest)
                    if not selectedNPC then return end
                    local questRemote = selectedNPC:FindFirstChild("QuestTake", true)
                    if questRemote and questRemote:IsA("RemoteEvent") then
                        questRemote:FireServer()
                    end
                end)
            end
        end)
    end
})

-- TAB AUTO SKILL
local function makeSkillToggle(tab, key)
    tab:AddToggle({
        Name = "Auto Skill " .. key,
        Default = false,
        Callback = function(state)
            getgenv()["autoskill" .. key:lower()] = state
            task.spawn(function()
                while getgenv()["autoskill" .. key:lower()] do
                    task.wait()
                    pcall(function()
                        for _, v in pairs(LocalPlayer.Character:GetChildren()) do
                            if v:IsA("Tool") and v:FindFirstChild(key) then
                                for _, c in pairs(v[key]:GetChildren()) do 
                                    if c:IsA("RemoteEvent") then c:FireServer() end 
                                end
                            end
                        end
                    end)
                end
            end)
        end
    })
end
for _, key in ipairs({"Z","X","C","V","B","N"}) do makeSkillToggle(SkillTab, key) end

-- TAB FRUIT
FruitTab:AddButton({
    Name = "STORE AND EAT (4 GUI) ðŸ‘º",
    Callback = function()
        pcall(function()
            local Save = game:GetService("ReplicatedStorage"):WaitForChild("Save")
            local Tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
            Save:WaitForChild("SavingMelee"):FireServer(-5)
            Save:WaitForChild("SavingSword"):FireServer(-5)
            if Tool and Tool.Name:lower():find("fruit") then Save:WaitForChild("SavingEvent"):FireServer(1) end
            task.wait(0.2)
            for _, Name in pairs({"BOXGUI", "ArmorBox", "DFGUI", "BOOKGUI"}) do
                local Gui = LocalPlayer.PlayerGui:FindFirstChild(Name)
                if Gui and Gui:FindFirstChild("Frame") and Gui.Frame:FindFirstChild("Sure") then
                    if Gui.Frame.Sure:FindFirstChild("EatScript") then Gui.Frame.Sure.EatScript.Eat:FireServer() end
                end
            end
        end)
    end
})

-- TAB RANDOM & LUCKY
local rollAmount = 1
RandomTab:AddTextbox({Name = "Sá»‘ lÆ°á»£ng", Default = "1", Callback = function(v) rollAmount = tonumber(v) or 1 end})
RandomTab:AddButton({
    Name = "Lucky Spin ðŸ‘º",
    Callback = function()
        local args = { { true, { Legendary = false, Common = false, Rare = false, Mythical = false, Secret = false }, rollAmount } }
        pcall(function() LocalPlayer.PlayerGui.Random.Bright:FireServer(unpack(args)) end)
    end
})

-- TAB MISC - AUTO NHáº¶T Táº¤T Cáº¢ CLICKDETECTOR TRONG WORKSPACE
MiscTab:AddToggle({
    Name = "Auto Nháº·t Táº¤T Cáº¢ Click (QuÃ©t Workspace - 100k Stud)",
    Default = false,
    Callback = function(state)
        getgenv().AutoCollectAllClick = state
        task.spawn(function()
            while getgenv().AutoCollectAllClick do
                pcall(function()
                    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                    if not hrp then return end
                    
                    for _, obj in ipairs(workspace:GetDescendants()) do
                        if obj:IsA("ClickDetector") then
                            local parentObj = obj.Parent
                            local pos = nil
                            
                            if parentObj:GetPivot then
                                pos = parentObj:GetPivot().Position
                            elseif parentObj.PrimaryPart then
                                pos = parentObj.PrimaryPart.Position
                            elseif parentObj:IsA("BasePart") or parentObj:IsA("MeshPart") then
                                pos = parentObj.Position
                            end
                            
                            if pos and (pos - hrp.Position).Magnitude <= 100000 then
                                fireclickdetector(obj)
                                task.wait(0.025)
                            end
                        end
                    end
                end)
                task.wait(0.25)
            end
        end)
    end
})

refreshTargetList()
