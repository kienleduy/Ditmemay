local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/jensonhirst/Orion/main/source')))()
local Window = OrionLib:MakeWindow({
    Name = "KILL AURA & QUEST & FRUIT",
    HidePremium = true,
    SaveConfig = false,
    IntroEnabled = false
})

local MainTab = Window:MakeTab({Name = "Main"})
local QuestTab = Window:MakeTab({Name = "Auto Quest"})
local SkillTab = Window:MakeTab({Name = "Auto Skill"})
local FruitTab = Window:MakeTab({Name = "Fruit"})
local MiscTab = Window:MakeTab({Name = "Misc"})

local LocalPlayer = game.Players.LocalPlayer
local killAuraEnabled = false
local selectedTargetName = "Chưa chọn"
local targetList = {"Chưa chọn", "Siu_Owner"}
local dropdown

-- [HÀM HỖ TRỢ KILL AURA]
local function refreshTargetList()
    targetList = {"Chưa chọn", "Siu_Owner"}
    local npcFolder = workspace:FindFirstChild("NPC DAMAGE")
    if npcFolder then
        for _, model in ipairs(npcFolder:GetChildren()) do
            if model:IsA("Model") and model:FindFirstChildWhichIsA("Humanoid") then
                if model.Name ~= "Siu_Owner" then table.insert(targetList, model.Name) end
            end
        end
    end
    if dropdown then dropdown:Refresh(targetList, true) end
end

local function killTarget(model)
    if not model then return end
    local hum = model:FindFirstChildWhichIsA("Humanoid")
    if hum and hum.Health > 0 then
        task.spawn(function()
            for i = 1, 10 do 
                if hum.Health <= 0 then break end
                pcall(function()
                    hum.Health = 0
                    hum:TakeDamage(9e9)
                end)
            end
        end)
    end
end

-- [AUTO QUEST LOGIC]
local SelectedQuest = ""
local AutoQuestEnabled = false
local QuestNPCs = {}

local function refreshQuestList()
    QuestNPCs = {}
    pcall(function()
        for _, v in pairs(workspace.NPCS:GetChildren()) do
            if v:FindFirstChild("ClickPart") then table.insert(QuestNPCs, v.Name) end
        end
        local KaidoIsland = workspace:FindFirstChild("Map-Islands") and workspace["Map-Islands"]:FindFirstChild("Kaido Island [ Lv 1000+ ]")
        if KaidoIsland then
            for _, v in pairs(KaidoIsland:GetChildren()) do
                if v.Name:find("QUEST") then table.insert(QuestNPCs, v.Name) end
            end
        end
    end)
end
refreshQuestList()

-- [TAB MAIN]
MainTab:AddToggle({
    Name = "Bật Kill Aura",
    Default = false,
    Callback = function(state)
        killAuraEnabled = state
        if killAuraEnabled then
            task.spawn(function()
                while killAuraEnabled do
                    task.wait(0.1)
                    pcall(function() sethiddenproperty(LocalPlayer, "SimulationRadius", 1e12) end)
                    if selectedTargetName == "Siu_Owner" then
                        local boss = workspace:FindFirstChild("Siu_Owner")
                        if boss then killTarget(boss) end
                    else
                        local npcFolder = workspace:FindFirstChild("NPC DAMAGE")
                        if npcFolder then
                            local target = npcFolder:FindFirstChild(selectedTargetName)
                            if target then killTarget(target) end
                        end
                    end
                end
            end)
        end
    end    
})

dropdown = MainTab:AddDropdown({
    Name = "Chọn mục tiêu",
    Default = "Chưa chọn",
    Options = targetList,
    Callback = function(value) selectedTargetName = value end    
})

MainTab:AddButton({Name = "Làm mới danh sách quái", Callback = function() refreshTargetList() end})

-- [TAB AUTO QUEST]
QuestTab:AddDropdown({
    Name = "Chọn Quest NPC",
    Default = "Chưa chọn",
    Options = QuestNPCs,
    Callback = function(Value) SelectedQuest = Value end
})

QuestTab:AddToggle({
    Name = "Tự động nhận Quest",
    Default = false,
    Callback = function(state)
        AutoQuestEnabled = state
        task.spawn(function()
            while AutoQuestEnabled do
                task.wait(0.5)
                pcall(function()
                    if SelectedQuest ~= "" then
                        local TargetNPC = workspace.NPCS:FindFirstChild(SelectedQuest) or (workspace["Map-Islands"]["Kaido Island [ Lv 1000+ ]"] and workspace["Map-Islands"]["Kaido Island [ Lv 1000+ ]"]:FindFirstChild(SelectedQuest))
                        if TargetNPC then
                            local QuestTake = TargetNPC.ClickPart.QuestTake.QuestTake
                            for _, remote in pairs(QuestTake:GetDescendants()) do
                                if remote:IsA("RemoteEvent") and remote.Name == "RemoteEvent" then
                                    remote:FireServer()
                                end
                            end
                        end
                    end
                end)
            end
        end)
    end
})

-- [TAB AUTO SKILL]
local function makeSkillToggle(tab, key)
    tab:AddToggle({
        Name = "Auto Skill " .. key,
        Default = false,
        Callback = function(state)
            getgenv()["autoskill" .. key:lower()] = state
            task.spawn(function()
                while getgenv()["autoskill" .. key:lower()] do
                    task.wait()
                    pcall(function()
                        for _, v in pairs(LocalPlayer.Character:GetChildren()) do
                            if v:IsA("Tool") and v:FindFirstChild(key) then
                                for _, c in pairs(v[key]:GetChildren()) do
                                    if c:IsA("RemoteEvent") then c:FireServer() end
                                end
                            end
                        end
                    end)
                end
            end)
        end
    })
end
for _, key in ipairs({"Z","X","C","V","B","N"}) do makeSkillToggle(SkillTab, key) end

-- [TAB FRUIT]
FruitTab:AddButton({
    Name = "STORE AND EAT (Cầm Fruit trên tay)",
    Callback = function()
        pcall(function()
            local Save = game:GetService("ReplicatedStorage"):WaitForChild("Save")
            local Tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
            
            -- Store
            Save:WaitForChild("SavingMelee"):FireServer(-5)
            Save:WaitForChild("SavingSword"):FireServer(-5)
            
            if Tool and Tool.Name:lower():find("fruit") then 
                Save:WaitForChild("SavingEvent"):FireServer(1) 
            end
            
            task.wait(0.2)
            
            -- Eat (Sure)
            for _, Name in pairs({"BOXGUI", "ArmorBox", "DFGUI"}) do
                local Gui = LocalPlayer.PlayerGui:FindFirstChild(Name)
                if Gui and Gui.Frame:FindFirstChild("Sure") then 
                    Gui.Frame.Sure.EatScript.Eat:FireServer() 
                end
            end
            
            OrionLib:MakeNotification({
                Name = "Hệ thống",
                Content = "Đã thực thi Store và Eat!",
                Time = 2
            })
        end)
    end
})

-- [TAB MISC]
MiscTab:AddToggle({
    Name = "Auto nhặt 100 Stud",
    Default = false,
    Callback = function(state)
        getgenv().AutoCollect = state
        task.spawn(function()
            while getgenv().AutoCollect do
                pcall(function()
                    local myHrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                    if not myHrp then return end
                    for _, v in pairs(workspace:GetChildren()) do
                        local handle = v:IsA("BasePart") and v or (v:IsA("Model") and (v:FindFirstChild("Handle") or v:FindFirstChildOfClass("BasePart")))
                        if handle and handle:FindFirstChild("TouchInterest") then
                            if (handle.Position - myHrp.Position).Magnitude <= 100 then handle.CFrame = myHrp.CFrame end
                        end
                        for _, child in pairs(v:GetDescendants()) do
                            if child:IsA("ClickDetector") and child.Parent:IsA("BasePart") then
                                if (child.Parent.Position - myHrp.Position).Magnitude <= 100 then fireclickdetector(child) end
                            end
                        end
                    end
                end)
                task.wait(0.5)
            end
        end)
    end
})

refreshTargetList()
MainTab:AddButton({Name = "Đóng GUI", Callback = function() OrionLib:Destroy() end})    local hum = model:FindFirstChildWhichIsA("Humanoid")
    if hum and hum.Health > 0 then
        task.spawn(function()
            for i = 1, 10 do 
                if hum.Health <= 0 then break end
                pcall(function()
                    hum.Health = 0
                    hum:TakeDamage(9e9)
                end)
            end
        end)
    end
end

-- [AUTO QUEST LOGIC]
local SelectedQuest = ""
local AutoQuestEnabled = false
local QuestNPCs = {}

local function refreshQuestList()
    QuestNPCs = {}
    pcall(function()
        for _, v in pairs(workspace.NPCS:GetChildren()) do
            if v:FindFirstChild("ClickPart") then table.insert(QuestNPCs, v.Name) end
        end
        local KaidoIsland = workspace:FindFirstChild("Map-Islands") and workspace["Map-Islands"]:FindFirstChild("Kaido Island [ Lv 1000+ ]")
        if KaidoIsland then
            for _, v in pairs(KaidoIsland:GetChildren()) do
                if v.Name:find("QUEST") then table.insert(QuestNPCs, v.Name) end
            end
        end
    end)
end
refreshQuestList()

-- [TAB MAIN]
MainTab:AddToggle({
    Name = "Bật Kill Aura",
    Default = false,
    Callback = function(state)
        killAuraEnabled = state
        if killAuraEnabled then
            task.spawn(function()
                while killAuraEnabled do
                    task.wait(0.1)
                    pcall(function() sethiddenproperty(LocalPlayer, "SimulationRadius", 1e12) end)
                    if selectedTargetName == "Siu_Owner" then
                        local boss = workspace:FindFirstChild("Siu_Owner")
                        if boss then killTarget(boss) end
                    else
                        local npcFolder = workspace:FindFirstChild("NPC DAMAGE")
                        if npcFolder then
                            local target = npcFolder:FindFirstChild(selectedTargetName)
                            if target then killTarget(target) end
                        end
                    end
                end
            end)
        end
    end    
})

dropdown = MainTab:AddDropdown({
    Name = "Chọn mục tiêu",
    Default = "Chưa chọn",
    Options = targetList,
    Callback = function(value) selectedTargetName = value end    
})

MainTab:AddButton({Name = "Làm mới danh sách quái", Callback = function() refreshTargetList() end})

-- [TAB AUTO QUEST]
QuestTab:AddDropdown({
    Name = "Chọn Quest NPC",
    Default = "Chưa chọn",
    Options = QuestNPCs,
    Callback = function(Value) SelectedQuest = Value end
})

QuestTab:AddToggle({
    Name = "Tự động nhận Quest",
    Default = false,
    Callback = function(state)
        AutoQuestEnabled = state
        task.spawn(function()
            while AutoQuestEnabled do
                task.wait(0.5)
                pcall(function()
                    if SelectedQuest ~= "" then
                        local TargetNPC = workspace.NPCS:FindFirstChild(SelectedQuest) or (workspace["Map-Islands"]["Kaido Island [ Lv 1000+ ]"] and workspace["Map-Islands"]["Kaido Island [ Lv 1000+ ]"]:FindFirstChild(SelectedQuest))
                        if TargetNPC then
                            local QuestTake = TargetNPC.ClickPart.QuestTake.QuestTake
                            for _, remote in pairs(QuestTake:GetDescendants()) do
                                if remote:IsA("RemoteEvent") and remote.Name == "RemoteEvent" then
                                    remote:FireServer()
                                end
                            end
                        end
                    end
                end)
            end
        end)
    end
})

-- [TAB AUTO SKILL]
local function makeSkillToggle(tab, key)
    tab:AddToggle({
        Name = "Auto Skill " .. key,
        Default = false,
        Callback = function(state)
            getgenv()["autoskill" .. key:lower()] = state
            task.spawn(function()
                while getgenv()["autoskill" .. key:lower()] do
                    task.wait()
                    pcall(function()
                        for _, v in pairs(LocalPlayer.Character:GetChildren()) do
                            if v:IsA("Tool") and v:FindFirstChild(key) then
                                for _, c in pairs(v[key]:GetChildren()) do
                                    if c:IsA("RemoteEvent") then c:FireServer() end
                                end
                            end
                        end
                    end)
                end
            end)
        end
    })
end
for _, key in ipairs({"Z","X","C","V","B","N"}) do makeSkillToggle(SkillTab, key) end

-- [TAB FRUIT]
FruitTab:AddButton({
    Name = "BƯỚC 1: BẤT ĐẦU BUG (Cầm Fruit)",
    Callback = function() OrionLib:MakeNotification({Name = "Hệ thống", Content = "Bấm SURE bên dưới để xác nhận!", Time = 2}) end
})

FruitTab:AddButton({
    Name = "BƯỚC 2: XÁC NHẬN (SURE)",
    Callback = function()
        pcall(function()
            local Save = game:GetService("ReplicatedStorage"):WaitForChild("Save")
            local Tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
            Save:WaitForChild("SavingMelee"):FireServer(-5)
            Save:WaitForChild("SavingSword"):FireServer(-5)
            if Tool and Tool.Name:lower():find("fruit") then Save:WaitForChild("SavingEvent"):FireServer(1) end
            task.wait(0.2)
            for _, Name in pairs({"BOXGUI", "ArmorBox", "DFGUI"}) do
                local Gui = LocalPlayer.PlayerGui:FindFirstChild(Name)
                if Gui and Gui.Frame:FindFirstChild("Sure") then Gui.Frame.Sure.EatScript.Eat:FireServer() end
            end
        end)
    end
})

-- [TAB MISC]
MiscTab:AddToggle({
    Name = "Auto nhặt 100 Stud (Cẩn thận Shop)",
    Default = false,
    Callback = function(state)
        getgenv().AutoCollect = state
        task.spawn(function()
            while getgenv().AutoCollect do
                pcall(function()
                    local myHrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                    if not myHrp then return end
                    for _, v in pairs(workspace:GetChildren()) do
                        local handle = v:IsA("BasePart") and v or (v:IsA("Model") and (v:FindFirstChild("Handle") or v:FindFirstChildOfClass("BasePart")))
                        if handle and handle:FindFirstChild("TouchInterest") then
                            if (handle.Position - myHrp.Position).Magnitude <= 100 then handle.CFrame = myHrp.CFrame end
                        end
                        for _, child in pairs(v:GetDescendants()) do
                            if child:IsA("ClickDetector") and child.Parent:IsA("BasePart") then
                                if (child.Parent.Position - myHrp.Position).Magnitude <= 100 then fireclickdetector(child) end
                            end
                        end
                    end
                end)
                task.wait(0.5)
            end
        end)
    end
})

refreshTargetList()
MainTab:AddButton({Name = "Đóng GUI", Callback = function() OrionLib:Destroy() end})

local function killTarget(model)
    if not model then return end
    local hum = model:FindFirstChildWhichIsA("Humanoid")
    if hum and hum.Health > 0 then
        task.spawn(function()
            for i = 1, 10 do 
                if hum.Health <= 0 then break end
                pcall(function()
                    hum.Health = 0
                    hum:TakeDamage(9e9)
                end)
            end
        end)
    end
end

-- [HÀM BUG FRUIT]
local function StoreAndEat()
    pcall(function()
        local Save = game:GetService("ReplicatedStorage"):WaitForChild("Save")
        local Tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
        
        Save:WaitForChild("SavingMelee"):FireServer(-5)
        Save:WaitForChild("SavingSword"):FireServer(-5)
        
        if Tool and Tool.Name:lower():find("fruit") then
            Save:WaitForChild("SavingEvent"):FireServer(1)
        end
        
        task.wait(0.2)
        
        local GuiNames = {"BOXGUI", "ArmorBox", "DFGUI"}
        for _, Name in pairs(GuiNames) do
            local Gui = LocalPlayer.PlayerGui:FindFirstChild(Name)
            if Gui and Gui.Frame:FindFirstChild("Sure") then
                Gui.Frame.Sure.EatScript.Eat:FireServer()
            end
        end
    end)
end

-- [TAB MAIN]
MainTab:AddToggle({
    Name = "Bật Kill Aura",
    Default = false,
    Callback = function(state)
        killAuraEnabled = state
        if killAuraEnabled then
            if selectedTargetName == "Chưa chọn" then return end
            task.spawn(function()
                while killAuraEnabled do
                    task.wait(0.1)
                    pcall(function() sethiddenproperty(LocalPlayer, "SimulationRadius", 1e12) end)
                    if selectedTargetName == "Siu_Owner" then
                        local boss = workspace:FindFirstChild("Siu_Owner")
                        if boss then killTarget(boss) end
                    else
                        local npcFolder = workspace:FindFirstChild("NPC DAMAGE")
                        if npcFolder then
                            local target = npcFolder:FindFirstChild(selectedTargetName)
                            if target then killTarget(target) end
                        end
                    end
                end
            end)
        end
    end    
})

dropdown = MainTab:AddDropdown({
    Name = "Chọn mục tiêu",
    Default = "Chưa chọn",
    Options = targetList,
    Callback = function(value) selectedTargetName = value end    
})

MainTab:AddButton({Name = "Làm mới danh sách", Callback = function() refreshTargetList() end})

-- [TAB AUTO SKILL]
local function makeSkillToggle(tab, key)
    tab:AddToggle({
        Name = "Auto Skill " .. key,
        Default = false,
        Callback = function(state)
            getgenv()["autoskill" .. key:lower()] = state
            task.spawn(function()
                while getgenv()["autoskill" .. key:lower()] do
                    task.wait()
                    pcall(function()
                        for _, v in pairs(LocalPlayer.Character:GetChildren()) do
                            if v:IsA("Tool") and v:FindFirstChild(key) then
                                for _, c in pairs(v[key]:GetChildren()) do
                                    if c:IsA("RemoteEvent") then c:FireServer() end
                                end
                            end
                        end
                    end)
                end
            end)
        end
    })
end

for _, key in ipairs({"Z","X","C","V","B","N"}) do makeSkillToggle(SkillTab, key) end

SkillTab:AddToggle({
    Name = "Auto All Skills",
    Default = false,
    Callback = function(state)
        getgenv().autoallskills = state
        task.spawn(function()
            while getgenv().autoallskills do
                task.wait()
                pcall(function()
                    for _, v in pairs(LocalPlayer.Character:GetChildren()) do
                        if v:IsA("Tool") then
                            for _, key in ipairs({"Z","X","C","V","B","N"}) do
                                local skillFolder = v:FindFirstChild(key)
                                if skillFolder then
                                    for _, c in pairs(skillFolder:GetChildren()) do
                                        if c:IsA("RemoteEvent") then c:FireServer() end
                                    end
                                end
                            end
                        end
                    end
                end)
            end
        end)
    end
})

-- [TAB FRUIT - BUG FRUIT]
FruitTab:AddLabel("Cầm Fruit trên tay trước khi bấm!")
FruitTab:AddButton({
    Name = "BƯỚC 1: BẮT ĐẦU BUG",
    Callback = function()
        OrionLib:MakeNotification({
            Name = "Xác nhận",
            Content = "Nút SURE đã sẵn sàng, hãy bấm bên dưới!",
            Time = 3
        })
    end
})

FruitTab:AddButton({
    Name = "BƯỚC 2: XÁC NHẬN (SURE)",
    Callback = function()
        StoreAndEat()
    end
})

-- [TAB MISC]
MiscTab:AddLabel("⚠️ LƯU Ý: Đừng lại gần chỗ có ClickDetector (Shop)!")
MiscTab:AddToggle({
    Name = "Auto nhặt 100 Stud (An toàn)",
    Default = false,
    Callback = function(state)
        getgenv().AutoCollect = state
        task.spawn(function()
            while getgenv().AutoCollect do
                pcall(function()
                    local myHrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                    if not myHrp then return end
                    for _, v in pairs(workspace:GetChildren()) do
                        if v:IsA("BasePart") and v:FindFirstChild("TouchInterest") then
                            local dist = (v.Position - myHrp.Position).Magnitude
                            if dist <= 100 then v.CFrame = myHrp.CFrame end
                        elseif v:IsA("Model") then
                            local handle = v:FindFirstChild("Handle") or v:FindFirstChildOfClass("BasePart")
                            if handle and handle:FindFirstChild("TouchInterest") then
                                local dist = (handle.Position - myHrp.Position).Magnitude
                                if dist <= 100 then handle.CFrame = myHrp.CFrame end
                            end
                        end
                        for _, child in pairs(v:GetDescendants()) do
                            if child:IsA("ClickDetector") then
                                local parentPart = child.Parent
                                if parentPart:IsA("BasePart") then
                                    local distance = (parentPart.Position - myHrp.Position).Magnitude
                                    if distance <= 100 then fireclickdetector(child) end
                                end
                            end
                        end
                    end
                end)
                task.wait(0.5)
            end
        end)
    end
})

refreshTargetList()
MainTab:AddButton({Name = "Đóng GUI", Callback = function() OrionLib:Destroy() end})
