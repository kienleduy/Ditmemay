-- JOUS MENU üë∫ + KILL AURA TARGETED
local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/jensonhirst/Orion/main/source')))()
local Window = OrionLib:MakeWindow({
    Name = "JOUS MENU üë∫ + KILL AURA",
    HidePremium = true,
    SaveConfig = true,
    ConfigFolder = "JousSettings",
    IntroEnabled = false
})

-- Mini FPS & Ping HUD
local RunService = game:GetService("RunService")
local Stats = game:GetService("Stats")
local gui = Instance.new("ScreenGui")
gui.Name = "MiniFPSPing"
gui.Parent = game.CoreGui
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 210, 0, 38)
frame.AnchorPoint = Vector2.new(1, 0)
frame.Position = UDim2.new(1, -10, 0, 10)
frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
frame.BackgroundTransparency = 0.1
frame.BorderSizePixel = 0
frame.ZIndex = 1000
frame.Visible = true

Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)

local dot = Instance.new("Frame", frame)
dot.Size = UDim2.new(0, 9, 0, 9)
dot.Position = UDim2.new(0, 10, 0.5, -4)
dot.BackgroundColor3 = Color3.fromRGB(0,255,0)
dot.BorderSizePixel = 0
dot.ZIndex = 1001
Instance.new("UICorner", dot).CornerRadius = UDim.new(1,0)

local text = Instance.new("TextLabel", frame)
text.Position = UDim2.new(0, 26, 0, 0)
text.Size = UDim2.new(1, -30, 1, 0)
text.BackgroundTransparency = 1
text.TextXAlignment = Enum.TextXAlignment.Left
text.TextYAlignment = Enum.TextYAlignment.Center
text.Font = Enum.Font.GothamMedium
text.TextSize = 13
text.TextColor3 = Color3.fromRGB(255,255,255)
text.Text = "JOUS HUB | FPS: 0 | Ping: 0 ms"
text.ZIndex = 1001

-- FPS & Ping logic
local frames = 0
local last = tick()

RunService.RenderStepped:Connect(function()
    frames += 1
    if tick() - last >= 1 then
        local fps = frames
        frames = 0
        last = tick()

        local ping = math.floor(
            Stats.Network.ServerStatsItem["Data Ping"]:GetValue()
        )

        if ping < 100 then
            dot.BackgroundColor3 = Color3.fromRGB(0,255,0)
        elseif ping < 200 then
            dot.BackgroundColor3 = Color3.fromRGB(255,170,0)
        else
            dot.BackgroundColor3 = Color3.fromRGB(255,0,0)
        end

        text.Text = string.format(
            "JOUS HUB | FPS: %d | Ping: %d ms",
            fps,
            ping
        )
    end
end)

-- [TAB MAIN - KILL & TP]
local MainTab = Window:MakeTab({Name = "Main"})
local targetList = {"Siu_Owner"}
local selectedNPC = "Siu_Owner"
local killAuraEnabled = false

local function refreshNPC()
    targetList = {"Siu_Owner"}
    local folder = workspace:FindFirstChild("NPC DAMAGE")
    if folder then
        for _, v in pairs(folder:GetChildren()) do
            if v:IsA("Model") and v.Name ~= "Siu_Owner" then 
                table.insert(targetList, v.Name) 
            end
        end
    end
end
refreshNPC()

MainTab:AddDropdown({
    Name = "Ch·ªçn NPC",
    Default = "Siu_Owner",
    Options = targetList,
    Callback = function(v) selectedNPC = v end
})

MainTab:AddButton({
    Name = "Refresh List",
    Callback = function() refreshNPC() end
})

MainTab:AddButton({
    Name = "Teleport t·ªõi Qu√°i ‚úàÔ∏è",
    Callback = function()
        pcall(function()
            local target = (selectedNPC == "Siu_Owner" and workspace:FindFirstChild("Siu_Owner")) or 
                          (workspace:FindFirstChild("NPC DAMAGE") and workspace["NPC DAMAGE"]:FindFirstChild(selectedNPC))
            if target and target:FindFirstChild("HumanoidRootPart") then
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = target.HumanoidRootPart.CFrame * CFrame.new(0, 5, 0)
            end
        end)
    end
})

-- H√†m kill m·∫°nh
local function killHumanoid(hum)
    if not hum or hum.Health <= 0 then return end
    
    pcall(function()
        hum.Health = 0
        hum.MaxHealth = 0
        hum.Health = -math.huge
        hum:ChangeState(Enum.HumanoidStateType.Dead)
        hum:TakeDamage(1e9)
    end)
end

-- Toggle Kill Aura (ch·ªâ kill NPC ƒë√£ ch·ªçn)
MainTab:AddToggle({
    Name = "üî• Kill Aura (NPC ƒë√£ ch·ªçn)",
    Default = false,
    Callback = function(state)
        killAuraEnabled = state
        
        if killAuraEnabled then
            OrionLib:MakeNotification({
                Name = "KILL AURA",
                Content = "B·∫¨T - Kill aura " .. selectedNPC,
                Time = 3
            })
        end
        
        task.spawn(function()
            while killAuraEnabled do
                task.wait(0.1) -- Gi·∫£m lag
                
                pcall(function()
                    sethiddenproperty(game.Players.LocalPlayer, "SimulationRadius", 1e12)
                    sethiddenproperty(game.Players.LocalPlayer, "MaxSimulationRadius", 1e12)
                    
                    -- T√¨m NPC ƒë√£ ch·ªçn
                    local target = (selectedNPC == "Siu_Owner" and workspace:FindFirstChild("Siu_Owner")) or 
                                  (workspace:FindFirstChild("NPC DAMAGE") and workspace["NPC DAMAGE"]:FindFirstChild(selectedNPC))
                    
                    if target and target:FindFirstChildWhichIsA("Humanoid") then
                        local hum = target:FindFirstChildWhichIsA("Humanoid")
                        if hum and hum.Health > 0 then
                            killHumanoid(hum)
                        end
                    end
                end)
            end
        end)
    end
})

-- [TAB PLAYER]
local PlayerTab = Window:MakeTab({Name = "Player"})

PlayerTab:AddToggle({
    Name = "Hi·ªÉn th·ªã FPS/Ping HUD",
    Default = true,
    Callback = function(state)
        frame.Visible = state
    end
})

-- [TAB QUEST]
local QuestTab = Window:MakeTab({Name = "Quest"})
local questNPCList = {"Ch∆∞a ch·ªçn"}
local selectedQuestNPC = "Ch∆∞a ch·ªçn"
local autoQuestEnabled = false

local function refreshQuestNPC()
    questNPCList = {"Ch∆∞a ch·ªçn"}
    local folder = workspace:FindFirstChild("NPCS")
    if folder then
        for _, v in pairs(folder:GetChildren()) do
            if v:IsA("Model") and v:FindFirstChild("ClickPart") then 
                table.insert(questNPCList, v.Name) 
            end
        end
    end
end
refreshQuestNPC()

QuestTab:AddDropdown({
    Name = "Ch·ªçn NPC Quest",
    Default = "Ch∆∞a ch·ªçn",
    Options = questNPCList,
    Callback = function(v) selectedQuestNPC = v end
})

QuestTab:AddToggle({
    Name = "Auto Quest (0.2s)",
    Default = false,
    Callback = function(state)
        autoQuestEnabled = state
        task.spawn(function()
            while autoQuestEnabled do
                task.wait(0.2)
                pcall(function()
                    local npc = workspace.NPCS:FindFirstChild(selectedQuestNPC)
                    if npc and npc:FindFirstChild("ClickPart") then
                        local qt = npc.ClickPart:FindFirstChild("QuestTake")
                        if qt and qt:FindFirstChild("QuestTake") then
                            for i = 1, 3 do
                                local btn = qt.QuestTake:FindFirstChild("Accept"..i)
                                if btn and btn:FindFirstChildOfClass("RemoteEvent") then
                                    btn:FindFirstChildOfClass("RemoteEvent"):FireServer()
                                end
                            end
                        end
                    end
                end)
            end
        end)
    end
})

-- [TAB WAR - AUTO SKILL & ARMOR]
local WarTab = Window:MakeTab({Name = "War"})

for _, key in ipairs({"Z","X","C","V","B","N"}) do
    WarTab:AddToggle({
        Name = "Auto Skill " .. key,
        Default = false,
        Callback = function(state)
            getgenv()["autoskill"..key] = state
            task.spawn(function()
                while getgenv()["autoskill"..key] do
                    task.wait()
                    pcall(function()
                        for _, t in pairs(game.Players.LocalPlayer.Character:GetChildren()) do
                            if t:IsA("Tool") and t:FindFirstChild(key) then
                                for _, r in pairs(t[key]:GetChildren()) do 
                                    if r:IsA("RemoteEvent") then 
                                        r:FireServer() 
                                    end 
                                end
                            end
                        end
                    end)
                end
            end)
        end
    })
end

WarTab:AddToggle({
    Name = "Auto Copy Armor (Fire Remote)",
    Default = false,
    Callback = function(state)
        getgenv().AutoArmor = state
        
        if state then
            OrionLib:MakeNotification({
                Name = "Auto Armor",
                Content = "B·∫¨T - T·ª± ƒë·ªông copy/fire armor t·ª´ ng∆∞·ªùi kh√°c",
                Time = 4
            })
        else
            OrionLib:MakeNotification({
                Name = "Auto Armor",
                Content = "T·∫ÆT",
                Time = 3
            })
        end
        
        task.spawn(function()
            while getgenv().AutoArmor do
                task.wait(0.3)
                pcall(function()
                    for _, descendant in pairs(game.Players:GetDescendants()) do
                        if descendant:IsA("RemoteEvent")
                            and descendant.Name == "Fire"
                            and descendant:FindFirstChild("Armor") then
                            descendant:FireServer()
                        end
                    end
                    
                    for _, plr in pairs(game.Players:GetPlayers()) do
                        if plr ~= game.Players.LocalPlayer then
                            for _, container in pairs({plr.Backpack, plr.Character}) do
                                if container then
                                    for _, item in pairs(container:GetChildren()) do
                                        if item.Name:lower():find("armor") then
                                            local k = item:FindFirstChild("K")
                                            if k then
                                                local fire = k:FindFirstChild("Fire")
                                                if fire and fire:IsA("RemoteEvent") then
                                                    fire:FireServer()
                                                end
                                            end
                                        end
                                    end
                                end
                            end
                        end
                    end
                end)
            end
        end)
    end
})

-- [TAB FRUIT - RANDOM & ROLL]
local FruitTab = Window:MakeTab({Name = "Fruit"})
local rollAmount = 1

FruitTab:AddTextbox({
    Name = "S·ªë l∆∞·ª£ng roll",
    Default = "1",
    Callback = function(v) rollAmount = tonumber(v) or 1 end
})

FruitTab:AddButton({
    Name = "Lucky Spin üé∞",
    Callback = function()
        pcall(function()
            local args = { { true, { Legendary = false, Common = false, Rare = false, Mythical = false, Secret = false }, rollAmount } }
            game.Players.LocalPlayer.PlayerGui.Random.Bright:FireServer(unpack(args))
        end)
    end
})

-- [TAB MISC]
local MiscTab = Window:MakeTab({Name = "Misc"})

MiscTab:AddButton({
    Name = "STORE AND EAT üçé",
    Callback = function()
        pcall(function()
            local Save = game:GetService("ReplicatedStorage"):WaitForChild("Save")
            Save:WaitForChild("SavingMelee"):FireServer(-5)
            Save:WaitForChild("SavingSword"):FireServer(-5)
            for _, Name in pairs({"BOXGUI", "ArmorBox", "DFGUI", "BOOKGUI"}) do
                local Gui = game.Players.LocalPlayer.PlayerGui:FindFirstChild(Name)
                if Gui and Gui.Frame:FindFirstChild("Sure") and Gui.Frame.Sure:FindFirstChild("EatScript") then
                    Gui.Frame.Sure.EatScript.Eat:FireServer()
                end
            end
        end)
    end
})

-- Auto Nh·∫∑t Item T·ªêI ∆ØU (0.3s - kh√¥ng lag)
MiscTab:AddToggle({
    Name = "üîÑ Auto Nh·∫∑t Item (T·ªëi ∆∞u)",
    Default = false,
    Callback = function(state)
        getgenv().AutoCollectOptimized = state
        
        if state then
            OrionLib:MakeNotification({
                Name = "Auto Collect",
                Content = "ƒê√É B·∫¨T - Nh·∫∑t ClickDetector (tr·ª´ MAP/NPCS)",
                Time = 3
            })
        end
        
        task.spawn(function()
            local lastRun = 0
            while getgenv().AutoCollectOptimized do
                local now = tick()
                if now - lastRun >= 0.3 then -- Ch·ªâ ch·∫°y m·ªói 0.3s
                    lastRun = now
                    
                    pcall(function()
                        -- L·∫•y danh s√°ch ClickDetector m·ªôt l·∫ßn
                        local detectors = {}
                        for _, obj in ipairs(workspace:GetDescendants()) do
                            if obj:IsA("ClickDetector") then
                                local parent = obj.Parent
                                if parent and parent.Parent then
                                    local parentName = parent.Parent.Name
                                    if parentName ~= "MAP" and parentName ~= "NPCS" and parentName ~= "NPC DAMAGE" then
                                        table.insert(detectors, obj)
                                    end
                                end
                            end
                        end
                        
                        -- Fire t·∫•t c·∫£ detector ƒë√£ thu th·∫≠p
                        for _, detector in ipairs(detectors) do
                            pcall(fireclickdetector, detector)
                        end
                    end)
                end
                task.wait(0.1) -- Ki·ªÉm tra m·ªói 0.1s
            end
        end)
    end
})

OrionLib:Init()

print("‚úÖ JOUS MENU + KILL AURA ƒë√£ load!")
print("üéØ Ch·ªçn NPC trong dropdown r·ªìi b·∫≠t Kill Aura")
print("üîÑ Auto nh·∫∑t item t·ªëi ∆∞u 0.3s")
print("üéÆ Tab Player c√≥ n√∫t b·∫≠t/t·∫Øt FPS HUD")
